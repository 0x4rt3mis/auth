{"ast":null,"code":"import { JwtHelperService } from '@auth0/angular-jwt';\nimport { catchError, map, throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nlet AuthService = /*#__PURE__*/(() => {\n  class AuthService {\n    constructor(http, router) {\n      this.http = http;\n      this.router = router;\n      this.url = 'https://api.escuelajs.co/api/v1/auth/login/';\n    }\n    sign(payload) {\n      return this.http.post(`${this.url}`, payload).pipe(map(res => {\n        localStorage.removeItem('access_token');\n        localStorage.setItem('access_token', res.access_token);\n        return this.router.navigate(['admin']);\n      }), catchError(e => {\n        if (e.error.message) return throwError(() => e.error.message);\n        return throwError(() => \"No nomento não estamos conseguindo validar os dados, tente novamente mais tarde\");\n      }));\n    }\n    logout() {\n      localStorage.removeItem('access_token');\n      return this.router.navigate(['']);\n    }\n    isAuthenticated() {\n      const token = localStorage.getItem(\"access_token\");\n      if (!token) return false;\n      const jwtHelper = new JwtHelperService();\n      return !jwtHelper.isTokenExpired(token);\n    }\n  }\n  AuthService.ɵfac = function AuthService_Factory(t) {\n    return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router));\n  };\n  AuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AuthService,\n    factory: AuthService.ɵfac,\n    providedIn: 'root'\n  });\n  return AuthService;\n})();\nexport { AuthService };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}